"use strict";function init(){var t=document.getElementById("searchI"),e=document.getElementById("searchDL"),n=document.getElementById("searchB"),r=document.getElementById("result");document.getElementById("teamOwners");displayBanner(),setOnKeyforSearch(t,e),setOnClickforSearch(n,t,r)}function displayBanner(){var t=getBannerImages(),e=document.getElementById("teamBanner");bannerLoop(0,e,t)}function bannerLoop(t,e,n){setBanner(e,n[t]),setTimeout(function(){t=(t+1)%n.length-1,bannerLoop(t+1,e,n)},3e3)}function setBanner(t,e){t.src=e}function setOnKeyforSearch(t,e){t.onkeyup=debounce(function(t){var n=this;n.value.trim()?changeInput(n.value,e):e.innerHTML=""},500,!1)}function debounce(t,e,n){var r;return function(){var a=this,i=arguments,o=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(a,i)},e),o&&t.apply(a,i)}}function changeInput(t,e){e.innerHTML=matchPlayerAndReturnOptions(t)}function matchPlayerAndReturnOptions(t){var e=new RegExp(t.split("").join("\\w*").replace(/\W/,""),"i");return getPlayers().filter(function(t){return t.name.match(e)}).map(function(t){return'<option value="'+t.name+'"/>'})}function setOnClickforSearch(t,e,n){t.onclick=function(){var t=e.value,r=findPlayer(t),a=findPlayerFull(r.id);a?n.innerHTML=showPlayerDetailsFull(a):n.innerHTML=r?showPlayerDetails(r):"Couldn't find \""+t+'" or not in a team.'}}function findPlayer(t){return getPlayers().find(function(e){return e.name==t})}function findPlayerFull(t){return playersIPLData.find(function(e){return e.player.id==t})}function showPlayerDetails(t){var e="<table><thead><tr><th>Name</th><th>Owner</th><th>Price(cr)</th></tr></thead>";return e+="<tr><td>"+t.name+"</td><td>"+t.owner+"</td><td>"+t.price+"</td></tr>",e+="</table>"}function showPlayerDetailsFull(t){var e=getTable(t.player,getPlayerInfo());return t.battingStats&&(e+="<h4>Batting Stats</h4>",e+=getTable(t.battingStats,getBattingStats())),t.bowlingStats&&(e+="<h4>Bowling Stats</h4>",e+=getTable(t.bowlingStats,getBowlingStats())),e}function getTable(t,e){if(t)return"<table><thead>"+getHtml(e.map(getHeader),headerMap)+"</thead><tbody>"+getHtml(e.map(getKey),bodyMap,t)+"</tbody></table>"}function headerMap(t){return"<th>"+t+"</th>"}function bodyMap(t){return"<td>"+("function"==typeof t?t(this):this[t])+"</td>"}function getHeader(t){return t.header}function getKey(t){return t.key}function getHtml(t,e,n){var r=t.map(e,n).reduce(concat,"<tr>");return r+="</tr>"}function concat(t,e){return t+e}function showOwners(t){var e,n="";for(e in teamOwners)n+='<li onclick=showTeam("'+e+'")>'+e+"</li>";t.innerHTML=n}function showTeam(t){var e=document.getElementById("teamList");e.innerHTML="";var n=players.filter(function(e){return e.owner==t});console.log(n);var r="<table><thead><tr><th>Name</th><th>Price(cr)</th></tr></thead>";n.forEach(function(t){r+="<tr>",r+="<td>"+t.name+"</td>",r+="<td>"+t.price+"</td>",r+="</tr>"}),e.innerHTML=r}window.onload=init;